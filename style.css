:root{
  --bg:#faf8ff;
  --card:#ffffff;
  --ink:#1f1633;
  --muted:#6b5a88;
  --primary:#7b46ff;       /* фиолетовый */
  --accent:#ff7ab8;        /* нежно-розовый */
  --ring:#bfa7ff;
  --ok:#13b37b;
  --danger:#ff5670;
  --shadow: 0 8px 24px rgba(35, 0, 110, 0.12);
  --radius:16px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--ink);
  background:linear-gradient(180deg,#fbf9ff 0%, #f7f0ff 100%);
}

/* Auth */
.auth-body{display:grid; place-items:center}
.auth-card{
  width:min(420px,92vw);
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:32px;
}
.app-title{margin:0 0 16px 0; text-align:center; letter-spacing:.5px}
.auth-form .field{display:flex; flex-direction:column; gap:6px; margin:12px 0}
input,select{
  width:100%;
  padding:12px 14px;
  border:1.5px solid #e9e2ff;
  border-radius:12px;
  background:#fff;
  outline:none;
  transition:border .15s, box-shadow .15s;
}
input:focus,select:focus{
  border-color:var(--primary);
  box-shadow:0 0 0 4px var(--ring);
}
.btn{
  border:0; padding:12px 16px; border-radius:12px; cursor:pointer;
  background:#eae2ff; color:#2b1766; font-weight:600; transition:transform .05s ease, filter .15s;
}
.btn:active{transform:translateY(1px)}
.btn.primary{background:linear-gradient(90deg,var(--primary),#9f6bff); color:#fff}
.btn.ghost{background:#fff; border:1.5px solid #e9e2ff}
.btn.danger{background:linear-gradient(90deg,#ff6b9a,#ff8966); color:#fff}
.icon-btn{
  border:0; background:#fff; border-radius:12px; padding:10px 12px; cursor:pointer;
  box-shadow:var(--shadow);
}
.error{color:var(--danger); min-height:1em; margin-top:8px}

/* App layout */
.header{
  position:sticky; top:0; z-index:50;
  display:flex; align-items:center; gap:12px;
  padding:10px 14px;
  background:rgba(255,255,255,.8);
  backdrop-filter:saturate(1.6) blur(8px);
  border-bottom:1px solid #efe8ff;
}
.logo-btn{
  margin-inline:auto;
  border:0; background:linear-gradient(90deg,var(--primary),var(--accent));
  -webkit-background-clip:text; background-clip:text; color:transparent;
  font-weight:900; font-size:18px; letter-spacing:.5px; cursor:pointer;
}
.header-right{display:flex; align-items:center; gap:10px}
.user-chip{
  padding:8px 12px; border-radius:999px; background:#f6f1ff; color:#4b2ea5; font-weight:600;
}
.badge{
  display:inline-block; min-width:20px; padding:1px 6px; margin-left:6px;
  border-radius:999px; background:#ff3b6b; color:#fff; font-size:12px; font-weight:700;
}
.badge.hidden{display:none}

.overlay{
  position:fixed; inset:0; background:rgba(12,0,33,.2); backdrop-filter:blur(2px);
}
.overlay.hidden{display:none}

.side-menu{
  position:fixed; top:56px; left:0; bottom:0; width:260px;
  background:#fff; border-right:1px solid #efe8ff; box-shadow:var(--shadow);
  transform:translateX(-102%); transition:transform .2s ease;
  z-index:60; padding:16px;
}
.side-menu.open{transform:translateX(0)}
.side-menu ul{list-style:none; padding:0; margin:0; display:grid; gap:6px}
.side-menu a{
  display:flex; align-items:center; gap:10px;
  padding:10px 12px; border-radius:12px; text-decoration:none; color:var(--ink);
  outline-offset:2px;
}
.side-menu a:hover{background:#faf6ff}
.side-menu a.active{background:linear-gradient(90deg,#efe8ff,#ffe6f2); border:1px solid #eadbff}

.content{padding:18px; max-width:1100px; margin:0 auto}
.section{display:none}
.section.active{display:block}
.section-title{margin:8px 0 16px 2px}

.card{
  background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); padding:16px; margin-bottom:16px;
}
.row{display:flex; gap:8px; flex-wrap:wrap}
.grid-2{display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:16px}
.days-grid{display:grid; grid-template-columns:repeat(7,minmax(40px,1fr)); gap:8px}
.day-btn{
  padding:10px 0; border-radius:12px; border:1.5px solid #e9e2ff; background:#fff; cursor:pointer; font-weight:700;
}
.day-btn.hidden{display:none}
.day-panel.hidden{display:none}
.muted{color:var(--muted); font-size:14px}
.advice{font-size:16px}

.checklist{list-style:none; margin:0; padding:0; display:grid; gap:8px}
.checklist li{
  display:flex; align-items:center; gap:10px; padding:10px; border:1.5px solid #efe8ff; border-radius:12px; background:#fff;
}
.checklist input[type="checkbox"]{width:18px; height:18px}
.checklist .done{opacity:.65; text-decoration:line-through}

.fixed-list{list-style:none; padding:0; margin:0; display:grid; gap:8px}
.fixed-item{display:flex; justify-content:space-between; align-items:center; padding:10px; border:1.5px solid #efe8ff; border-radius:12px}
.fixed-item .paid{color:var(--ok); font-weight:700}
.list{list-style:none; padding:0; margin:0; display:grid; gap:8px}
.list li{display:flex; justify-content:space-between; align-items:center; padding:10px; border:1.5px solid #efe8ff; border-radius:12px; background:#fff}
.list .tag{padding:4px 8px; border-radius:999px; background:#f6f1ff; font-size:12px}
.list .del{border:0; background:#fff; color:var(--danger); font-weight:800; cursor:pointer}
.summary-grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:10px}
.summary-grid .kpi{background:#fff; padding:12px; border-radius:12px; border:1.5px solid #efe8ff}
.summary-grid .kpi strong{display:block; font-size:18px}

.table{width:100%; border-collapse:collapse}
.table th,.table td{border-bottom:1px solid #f1eaff; padding:10px; text-align:left; font-size:14px}
.table th{color:#6346b9}
.overdue{color:var(--danger); font-weight:700}

.accordion{display:grid; gap:8px}
.acc-item{border:1.5px solid #efe8ff; border-radius:12px; overflow:hidden; background:#fff}
.acc-header{width:100%; text-align:left; padding:12px 14px; border:0; background:#fff; cursor:pointer; font-weight:700}
.acc-content{display:none; padding:0 14px 14px 14px}
.acc-item.open .acc-content{display:block}

a.link{color:#7b46ff; text-decoration:underline}

/* focus states */
button:focus, a:focus{outline:3px solid var(--ring);}
